let data ={
    "data": [
      {
        "Featured_Albums":[
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Bloodlust",
            "img": "/assets/album1.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Death%20Bed.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hill",
            "name_music":"Time flies",
            "img": "/assets/album2.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Bad%20Liar.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Dark matters",
            "img": "/assets/album3.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Faded.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Eye to eye",
            "img": "/assets/album4.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Hate%20Me.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Cloud nine",
            "img": "/assets/album5.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Solo.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Cobweb of lies",
            "img": "/assets/album6.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Without%20Me.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Endless Things",
            "img": "/assets/artist1.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Death%20Bed.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Desired Games",
            "img": "/assets/artist2.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Death%20Bed.mp3"
          }

        ]
      },
      {
        "Trending_Albums":[
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Dream Your",
            "img": "/assets/artist13.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Bad%20Liar.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hill",
            "name_music":"Until I Met You",
            "img": "/assets/artist12.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Faded.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Gimme Some Courage",
            "img": "/assets/artist11.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Hate%20Me.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Dark Alley Acoustic",
            "img": "/assets/artist10.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Hate%20Me.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Walking Promises",
            "img": "/assets/artist9.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Death%20Bed.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Desired Games",
            "img": "/assets/artist8.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Death%20Bed.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Endless Things",
            "img": "/assets/artist7.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Solo.mp3"
          },
          {
            "name": "Ava Cornish & Brian Hilltest",
            "name_music":"Desired Games",
            "img": "/assets/artist6.jpg.png",
            "mp3": "https://samplesongs.netlify.app/Hate%20Me.mp3"
          }

        ]
      },
      {
        "top_15_albums":[
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Dream Your",
                "img": "/assets/1.png",
                "mp3": "https://samplesongs.netlify.app/Bad%20Liar.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Until I Met You",
                "img": "/assets/2.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Gimme Some",
                "img": "/assets/3.png",
                "mp3": "https://samplesongs.netlify.app/Hate%20Me.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Dark Alley Acoustic",
                "img": "/assets/4.png",
                "mp3": "https://samplesongs.netlify.app/Without%20Me.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Walking Promises",
                "img": "/assets/5.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/6.png",
                "mp3": "https://samplesongs.netlify.app/Faded.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Endless Things",
                "img": "/assets/7.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/8.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/9.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/10.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/11.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/12.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/13.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/14.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            },
            {
                "name": "Ava Cornish & Brian Hilltest",
                "name_music":"Desired Games",
                "img": "/assets/15.png",
                "mp3": "https://samplesongs.netlify.app/Solo.mp3"
            }
        ]
      },
      {
        "Albums_By_Artists":[
          {
            "name":"Ava Cornish",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist1.jpg.png",
            "mp3":"https://samplesongs.netlify.app/Solo.mp3"
          },
          {
            "name":"Until I Met You",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist2.jpg.png",
            "mp3":"/assets/2.mp3"
          },
          {
            "name":"Gimme Some Courage",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist3.jpg.png",
            "mp3":"/assets/3.mp3"
          },
          {
            "name":"Dark Alley Acoustic",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist4.jpg.png",
            "mp3":"/assets/4.mp3"
          },
          {
            "name":"Walking Promises",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist5.jpg.png",
            "mp3":"/assets/5.mp3"
          },
          {
            "name":"Desired Games",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist6.jpg.png",
            "mp3":"https://samplesongs.netlify.app/Solo.mp3"
          },
          {
            "name":"Endless Things",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist7.jpg.png",
            "mp3":"/assets/2.mp3"
          },
          {
            "name":"Desired Games",
            "name_music":"Best Of Ava Cornish",
            "img":"/assets/artist8.jpg.png",
            "mp3":"/assets/3.mp3"
          }
        ]
      }
  
    ]
  }

  document.addEventListener("DOMContentLoaded", function () {
    let featuredContainer = document.getElementById("featured-albums");
    let trendingContainer = document.getElementById("trending-albums");
    let top15Container = document.getElementById("top15_albums");
    let albumsByArtistsContainer = document.getElementById("Artists-albums");
    

    let featuredAlbums = data.data[0].Featured_Albums;
    let trendingAlbums = data.data[1].Trending_Albums;
    let top15Albums = data.data[2].top_15_albums;
    let albumsByArtists = data.data[3].Albums_By_Artists;
    
    let featuredRef = { value: 0 };
    let trendingRef = { value: 0 };
    let artistsRef = { value: 0 };
    
    function renderAlbums(container, albums, ref) {
      let index = ref.value;
      let visible = albums.slice(index, index + 6);
      
      let itemClass = 'Featured-item';
      if (container.classList.contains('trending-albums')) itemClass = 'Trending-item';
      else if (container.id === 'Artists-albums') itemClass = 'Artists-item';
    
      container.innerHTML = `
        <button id="${container.id}-prev" class="btn btn-sm btn-outline-secondary me-1">
          <i class="bi bi-chevron-left"></i>
        </button>
        ${visible.map(album => `
          <div class="${itemClass}" onclick="playAudio('${album.mp3}', '${album.name_music.replace(/'/g, "\\'")}', '${album.name.replace(/'/g, "\\'")}', '${album.img}')">
            <div class="mb-3"><img src="${album.img}" alt=""></div>
            <div><h6>${album.name_music}</h6></div>
            <div><span>${album.name}</span></div>
          </div>
        `).join('')}
        <button id="${container.id}-next" class="btn btn-sm btn-outline-secondary ms-1">
          <i class="bi bi-chevron-right"></i>
        </button>
      `;
    }
    
  
    function bindNav(container, albums, ref) {
      let prevBtn = document.getElementById(`${container.id}-prev`);
      let nextBtn = document.getElementById(`${container.id}-next`);
      
      prevBtn.onclick = () => {
        if (ref.value > 0) {
          ref.value--;
          renderAlbums(container, albums, ref);
          bindNav(container, albums, ref);
        }
      };
      nextBtn.onclick = () => {
        if (ref.value < albums.length - 6) {
          ref.value++;
          renderAlbums(container, albums, ref);
          bindNav(container, albums, ref);
        }
      };
    }
  
    
    renderAlbums(featuredContainer, featuredAlbums, featuredRef);
    bindNav(featuredContainer, featuredAlbums, featuredRef);
  
    renderAlbums(trendingContainer, trendingAlbums, trendingRef);
    bindNav(trendingContainer, trendingAlbums, trendingRef);
    
    renderAlbums(albumsByArtistsContainer, albumsByArtists, artistsRef);
    bindNav(albumsByArtistsContainer, albumsByArtists, artistsRef);

    // Render Top 15 Albums
    let top15HTML = "";
    for (let i = 0; i < 3; i++) {
      top15HTML += '<div class="me-3">';
      for (let j = 0; j < 5; j++) {
        let idx = i * 5 + j;
        let album = top15Albums[idx];
        top15HTML += `
          <div class="d-flex align-items-center" style="cursor: pointer;" onclick="playAudio('${album.mp3}', '${album.name_music.replace(/'/g, "\\'")}', '${album.name.replace(/'/g, "\\'")}', '${album.img}')">
            <div><h1>${(idx + 1).toString().padStart(2, '0')}</h1></div>
            <div class="divimg mx-3"><img class="small-img" src="${album.img}" alt=""></div>
            <div>
              <p style="margin-bottom: 0px;" class="text-top">${album.name_music}</p>
              <p class="text-top2">${album.name}</p>
            </div>
            <div class="ms-5 me-3">5:10</div>
            <div><i class="bi bi-three-dots"></i></div>
          </div>
          <hr>
        `;
      }
      top15HTML += '</div>';
    }
    top15Container.innerHTML = top15HTML;
  });
  
  let currentSrc = null;
  let name_music = document.getElementById("name_music");
  let name_artist = document.getElementById("name_artist");
  let img_player = document.getElementById("img_player");
  let start_pause = document.getElementById("start-pause");
function startstopaudio(){
  let audio = document.getElementById("audio-player");
  if (audio.paused) {
    audio.play();
    start_pause.innerHTML =`<i class="bi bi-play-fill"></i>`
  } else {
    audio.pause();
    start_pause.innerHTML =`<i class="bi bi-pause"></i>`
  
  }
}  
function playAudio(src, name_music1, name_artist1, img) {
  name_music.innerText = name_music1;
  name_artist.innerText = name_artist1;
  console.log(img);
  img_player.src = img;
  console.log(img_player);
  
  let audio = document.getElementById("audio-player");  
    audio.src = src;
}
// Chức năng toggle sidebar (mở rộng/thu gọn)
const sidebar = document.querySelector('.sidebar'); // Lấy phần tử sidebar
const chevronBtn = document.querySelector('.sidebar-chevorn a'); // Lấy nút chevron (mũi tên)
const mainContent = document.querySelector('.container'); // Lấy container chính
const header = document.querySelector('header'); // Lấy header
let isSidebarExpanded = false; // Biến trạng thái: false = sidebar thu gọn, true = sidebar mở rộng

// Thêm sự kiện click cho nút chevron để toggle sidebar
chevronBtn.addEventListener('click', () => {
    isSidebarExpanded = !isSidebarExpanded; // Đổi trạng thái (thu gọn ↔ mở rộng)
    if (isSidebarExpanded) {
        // Khi sidebar mở rộng
        sidebar.classList.add('expanded'); // Thêm class .expanded cho sidebar
        mainContent.classList.add('expanded'); // Điều chỉnh padding container
        header.classList.add('expanded'); // Điều chỉnh vị trí và chiều rộng header
        chevronBtn.querySelector('i').classList.replace('fa-chevron-right', 'fa-chevron-left'); // Đổi biểu tượng thành mũi tên trái
    } else {
        // Khi sidebar thu gọn
        sidebar.classList.remove('expanded'); // Xóa class .expanded
        mainContent.classList.remove('expanded'); // Khôi phục padding container
        header.classList.remove('expanded'); // Khôi phục header
        chevronBtn.querySelector('i').classList.replace('fa-chevron-left', 'fa-chevron-right'); // Đổi biểu tượng thành mũi tên phải
    }
});
const links = document.querySelectorAll('.sidebar a');
const currentPage = window.location.pathname.split('/').pop();

links.forEach(link => {
  const linkPage = link.getAttribute('href');
  if (linkPage === currentPage) {
    link.classList.add('active');
  }
});
/* Login */
const loginBtn = document.querySelector('.login-btn');
const modal = document.querySelector('.modalLogin');

loginBtn.addEventListener('click', () => {
  modal.classList.add('show');
});

// Đóng modal khi click ra ngoài (tuỳ chọn)
modal.addEventListener('click', (e) => {
  if (e.target === modal) {
    modal.classList.remove('show');
  }
});
/* Register */
const registerBtn = document.querySelector('.register-btn');
const registerModal = document.querySelector('.modalRegister');

registerBtn.addEventListener('click', () => {
  registerModal.classList.add('show');
});

registerModal.addEventListener('click', (e) => {
  if (e.target === registerModal) {
    registerModal.classList.remove('show');
  }
});